<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>My Anime Collection (Local + XLSX)</title>

  <!-- Style (gunakan style.css milikmu) -->
  <link rel="stylesheet" href="style.css">

  <!-- jsPDF (PDF export) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  <!-- ExcelJS (untuk XLSX embed image) -->
  <script src="https://cdn.jsdelivr.net/npm/exceljs@4.3.0/dist/exceljs.min.js"></script>

  <!-- FileSaver (simpan file di browser) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
</head>
<body>
  <header>
    <h1><span class="anime-icon">ğŸŒ</span>My Anime Collection<span class="anime-icon">ğŸŒ</span></h1>
  </header>

  <main>
    <!-- FORM: tambah / edit -->
    <section>
      <h2>ğŸ“ Tambah / Edit Anime</h2>
      <form id="animeForm">
        <div class="form-row">
          <div class="form-group">
            <label for="animeTitle">Judul Anime *</label>
            <input id="animeTitle" type="text" required placeholder="Contoh: Naruto" />
          </div>
          <div class="form-group">
            <label for="animeYear">Tahun Rilis *</label>
            <input id="animeYear" type="number" required min="1960" max="2030" placeholder="2024" />
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="animeGenre">Genre</label>
            <input id="animeGenre" type="text" placeholder="Action, Adventure" />
          </div>
          <div class="form-group">
            <label for="animeEpisodes">Jumlah Episode</label>
            <input id="animeEpisodes" type="number" min="1" placeholder="12" />
          </div>
        </div>

        <div class="form-group full-width">
          <label for="animeNotes">Catatan / Review</label>
          <textarea id="animeNotes" rows="4" placeholder="Tuliskan review..."></textarea>
        </div>

        <div class="form-group full-width">
          <label>Kategori *</label>
          <div class="category-grid">
            <div class="category-option">
              <input id="catWatched" name="category" type="radio" value="watched" required>
              <label for="catWatched" class="category-label"><span class="category-icon">âœ…</span><span class="category-text">Sudah Ditonton</span></label>
            </div>
            <div class="category-option">
              <input id="catUnwatched" name="category" type="radio" value="unwatched">
              <label for="catUnwatched" class="category-label"><span class="category-icon">â³</span><span class="category-text">Belum Ditonton</span></label>
            </div>
            <div class="category-option">
              <input id="catRecommended" name="category" type="radio" value="recommended">
              <label for="catRecommended" class="category-label"><span class="category-icon">â­</span><span class="category-text">Rekomendasi</span></label>
            </div>
            <div class="category-option">
              <input id="catRewatch" name="category" type="radio" value="rewatch">
              <label for="catRewatch" class="category-label"><span class="category-icon">ğŸ”„</span><span class="category-text">Cocok Rewatch</span></label>
            </div>
            <div class="category-option">
              <input id="catNoRewatch" name="category" type="radio" value="no_rewatch">
              <label for="catNoRewatch" class="category-label"><span class="category-icon">ğŸš«</span><span class="category-text">Ga Cocok Rewatch</span></label>
            </div>
            <div class="category-option">
              <input id="catWantToWatch" name="category" type="radio" value="want_to_watch">
              <label for="catWantToWatch" class="category-label"><span class="category-icon">ğŸ¯</span><span class="category-text">Mau Coba Tonton</span></label>
            </div>
          </div>
        </div>

        <div class="form-group full-width">
          <label>Upload Poster Anime</label>
          <div class="image-upload-container">
            <div id="posterPreview" class="image-preview large" onclick="document.getElementById('animePoster').click()">
              <div class="image-preview-placeholder">ğŸ“·<br>Klik untuk upload<br>poster anime</div>
            </div>
            <input id="animePoster" type="file" accept="image/*">
          </div>
        </div>

        <div class="form-group full-width">
          <label>Tokoh / Pemeran (Maks 6)</label>
          <div id="charactersContainer"></div>
          <button type="button" id="addCharacterBtn" class="btn-secondary">â• Tambah Tokoh</button>
        </div>

        <button id="submitBtn" class="btn-primary" type="submit">â• Tambahkan Anime</button>
      </form>
    </section>

    <!-- SEARCH -->
    <section>
      <h2>ğŸ” Cari Anime</h2>
      <form id="searchAnime">
        <div class="form-group">
          <label for="searchTitle">Judul Anime</label>
          <input id="searchTitle" type="text" placeholder="Cari berdasarkan judul..." />
        </div>
        <button class="btn-primary" type="submit">Cari</button>
      </form>
    </section>

    <!-- LISTS -->
    <section class="anime-lists">
      <div class="category-section">
        <h2><span class="category-header">âœ… Sudah Ditonton (<span id="watchedCount">0</span>) <div class="category-controls"><button class="pdf-btn" onclick="exportToPDF('watched')">ğŸ“„ Export PDF</button> <button class="pdf-btn" onclick="exportToXLSX('watched')">ğŸ“¥ Export XLSX</button></div></span></h2>
        <div id="watchedList" class="anime-grid"><div class="empty-message">ğŸ“­ Belum ada anime</div></div>
      </div>

      <div class="category-section">
        <h2><span class="category-header">â³ Belum Ditonton (<span id="unwatchedCount">0</span>) <div class="category-controls"><button class="pdf-btn" onclick="exportToPDF('unwatched')">ğŸ“„ Export PDF</button> <button class="pdf-btn" onclick="exportToXLSX('unwatched')">ğŸ“¥ Export XLSX</button></div></span></h2>
        <div id="unwatchedList" class="anime-grid"><div class="empty-message">ğŸ“­ Belum ada anime</div></div>
      </div>

      <div class="category-section">
        <h2><span class="category-header">â­ Rekomendasi (<span id="recommendedCount">0</span>) <div class="category-controls"><button class="pdf-btn" onclick="exportToPDF('recommended')">ğŸ“„ Export PDF</button> <button class="pdf-btn" onclick="exportToXLSX('recommended')">ğŸ“¥ Export XLSX</button></div></span></h2>
        <div id="recommendedList" class="anime-grid"><div class="empty-message">ğŸ“­ Belum ada anime</div></div>
      </div>

      <div class="category-section">
        <h2><span class="category-header">ğŸ”„ Cocok Rewatch (<span id="rewatchCount">0</span>) <div class="category-controls"><button class="pdf-btn" onclick="exportToPDF('rewatch')">ğŸ“„ Export PDF</button> <button class="pdf-btn" onclick="exportToXLSX('rewatch')">ğŸ“¥ Export XLSX</button></div></span></h2>
        <div id="rewatchList" class="anime-grid"><div class="empty-message">ğŸ“­ Belum ada anime</div></div>
      </div>

      <div class="category-section">
        <h2><span class="category-header">ğŸš« Ga Cocok Rewatch (<span id="noRewatchCount">0</span>) <div class="category-controls"><button class="pdf-btn" onclick="exportToPDF('no_rewatch')">ğŸ“„ Export PDF</button> <button class="pdf-btn" onclick="exportToXLSX('no_rewatch')">ğŸ“¥ Export XLSX</button></div></span></h2>
        <div id="noRewatchList" class="anime-grid"><div class="empty-message">ğŸ“­ Belum ada anime</div></div>
      </div>

      <div class="category-section">
        <h2><span class="category-header">ğŸ¯ Mau Coba Tonton (<span id="wantToWatchCount">0</span>) <div class="category-controls"><button class="pdf-btn" onclick="exportToPDF('want_to_watch')">ğŸ“„ Export PDF</button> <button class="pdf-btn" onclick="exportToXLSX('want_to_watch')">ğŸ“¥ Export XLSX</button></div></span></h2>
        <div id="wantToWatchList" class="anime-grid"><div class="empty-message">ğŸ“­ Belum ada anime</div></div>
      </div>
    </section>

    <!-- STAT -->
    <section>
      <h2>ğŸ“Š Statistik Koleksi</h2>
      <div class="stats">
        <div class="stat-item"><span id="totalAnime" class="stat-number">0</span><div class="stat-label">Total Anime</div></div>
        <div class="stat-item"><span id="totalWatched" class="stat-number">0</span><div class="stat-label">Sudah Ditonton</div></div>
        <div class="stat-item"><span id="totalUnwatched" class="stat-number">0</span><div class="stat-label">Belum Ditonton</div></div>
        <div class="stat-item"><span id="totalRecommended" class="stat-number">0</span><div class="stat-label">Rekomendasi</div></div>
      </div>
    </section>
  </main>

  <!-- Loading overlay -->
  <div id="loadingOverlay" class="loading-overlay" style="display:none">
    <div class="spinner"></div>
    <p>Memproses...</p>
  </div>

  <!-- Main JS -->
  <script src="main.js"></script>
</body>
</html>
